<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="d3form - A beautiful no-code diagramming platform with smooth animated presentations">
    <title>d3form - Interactive Diagramming & Presentations</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div id="app">
        <!-- Header -->
        <header class="app-header">
            <div class="header-left">
                <h1 class="logo">
                    <svg class="logo-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M3 3L21 21M3 21L21 3" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
                    </svg>
                    d3form
                </h1>
            </div>
            <div class="header-center">
                <div class="mode-toggle">
                    <button id="editModeBtn" class="mode-btn active" data-mode="edit">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                            <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" />
                            <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor"
                                stroke-width="2" stroke-linecap="round" />
                        </svg>
                        Edit
                    </button>
                    <button id="presentModeBtn" class="mode-btn" data-mode="present">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                            <polygon points="5 3 19 12 5 21 5 3" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" fill="currentColor" />
                        </svg>
                        Present
                    </button>
                </div>
            </div>
            <div class="header-right">
                <button id="exportBtn" class="icon-btn" title="Export">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5-5 5 5M12 5v12" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <div class="app-content">
            <!-- Toolbar (Edit Mode) -->
            <aside id="toolbar" class="toolbar">
                <div class="toolbar-section">
                    <h3 class="toolbar-title">Tools</h3>
                    <div class="tool-grid">
                        <button class="tool-btn active" data-tool="select" title="Select (V)">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <path d="M3 3l7.07 16.97 2.51-7.39 7.39-2.51L3 3z" stroke="currentColor"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </button>
                        <button class="tool-btn" data-tool="span" title="Span Select (S)">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"
                                    stroke-dasharray="4 4" />
                                <circle cx="12" cy="12" r="3" fill="currentColor" />
                            </svg>
                        </button>
                        <button class="tool-btn" data-tool="rectangle" title="Rectangle (R)">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor"
                                    stroke-width="2" />
                            </svg>
                        </button>
                        <button class="tool-btn" data-tool="circle" title="Circle (C)">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2" />
                            </svg>
                        </button>
                        <button class="tool-btn" data-tool="text" title="Text (T)">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <polyline points="4 7 4 4 20 4 20 7" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" />
                                <line x1="9" y1="20" x2="15" y2="20" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" />
                                <line x1="12" y1="4" x2="12" y2="20" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" />
                            </svg>
                        </button>
                        <button class="tool-btn" data-tool="arrow" title="Arrow (A)">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" />
                                <polyline points="12 5 19 12 12 19" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </button>
                        <button class="tool-btn" data-tool="line" title="Line (L)">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <line x1="5" y1="19" x2="19" y2="5" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" />
                            </svg>
                        </button>
                        <!-- Separator -->
                        <div class="tool-separator"></div>
                        <!-- Group/Ungroup -->
                        <button class="tool-btn" id="groupBtn" title="Group (G)">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" stroke-width="2"
                                    stroke-dasharray="4 4" />
                                <circle cx="12" cy="12" r="4" fill="currentColor" />
                            </svg>
                        </button>
                        <button class="tool-btn" id="ungroupBtn" title="Ungroup (Shift+G)">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <rect x="3" y="3" width="7" height="7" stroke="currentColor" stroke-width="2" />
                                <rect x="14" y="14" width="7" height="7" stroke="currentColor" stroke-width="2" />
                                <g opacity="0.5">
                                    <path d="M10 10l4 4" stroke="currentColor" stroke-width="2" />
                                </g>
                            </svg>
                        </button>
                    </div>
                </div>

                <div class="toolbar-section">
                    <h3 class="toolbar-title">Properties</h3>
                    <div class="property-group">
                        <label class="property-label">Fill</label>
                        <input type="color" id="fillColor" class="color-input" value="#6366f1">
                    </div>
                    <div class="property-group">
                        <label class="property-label">Stroke</label>
                        <input type="color" id="strokeColor" class="color-input" value="#1e293b">
                    </div>
                    <div class="property-group">
                        <label class="property-label">Stroke Width</label>
                        <input type="range" id="strokeWidth" class="range-input" min="1" max="10" value="2">
                        <span class="range-value">2</span>
                    </div>
                    <div class="property-group">
                        <label class="property-label">Opacity</label>
                        <input type="range" id="opacity" class="range-input" min="0" max="100" value="100">
                        <span class="range-value">100%</span>
                    </div>
                    <div class="property-group">
                        <label class="property-label">Font Family</label>
                        <select id="fontFamily" class="range-input" style="height: 30px;">
                            <option value="Inter">Inter</option>
                            <option value="Arial">Arial</option>
                            <option value="Times New Roman">Times New Roman</option>
                            <option value="Courier New">Courier New</option>
                            <option value="Georgia">Georgia</option>
                            <option value="Verdana">Verdana</option>
                        </select>
                    </div>
                    <div class="property-group">
                        <label class="property-label">Font Size</label>
                        <input type="range" id="fontSize" class="range-input" min="12" max="72" value="16">
                        <span class="range-value">16px</span>
                    </div>
                    <div class="property-group">
                        <label class="property-label">Link Style</label>
                        <select id="linkStyle" class="range-input" style="height: 30px;">
                            <option value="solid">Solid</option>
                            <option value="dashed">Dashed</option>
                            <option value="dotted">Dotted</option>
                        </select>
                    </div>
                    <div class="property-group">
                        <label class="property-label">Arrow Heads</label>
                        <select id="arrowStyle" class="range-input" style="height: 30px;">
                            <option value="none">None</option>
                            <option value="end">End</option>
                            <option value="start">Start</option>
                            <option value="both">Both</option>
                        </select>
                    </div>
                </div>

                <div class="toolbar-section">
                    <h3 class="toolbar-title">Frames</h3>
                    <div class="frame-buttons">
                        <button id="addFrameBtn" class="primary-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <line x1="12" y1="5" x2="12" y2="19" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" />
                                <line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2"
                                    stroke-linecap="round" />
                            </svg>
                            Add Frame
                        </button>
                        <button id="duplicateFrameBtn" class="secondary-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <rect x="9" y="9" width="13" height="13" rx="2" stroke="currentColor"
                                    stroke-width="2" />
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" stroke="currentColor"
                                    stroke-width="2" />
                            </svg>
                            Duplicate
                        </button>
                    </div>
                    <div id="framesList" class="frames-list"></div>
                </div>
            </aside>

            <!-- Canvas Area -->
            <main class="canvas-container">
                <div id="canvasWrapper" class="canvas-wrapper">
                    <svg id="canvas" class="canvas"></svg>
                </div>

                <!-- Presentation Controls (Present Mode) -->
                <div id="presentControls" class="present-controls hidden">
                    <button id="prevFrameBtn" class="nav-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <polyline points="15 18 9 12 15 6" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </button>
                    <div class="frame-indicator">
                        <span id="currentFrameNum">1</span> / <span id="totalFramesNum">1</span>
                    </div>
                    <button id="nextFrameBtn" class="nav-btn">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                            <polyline points="9 18 15 12 9 6" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </button>
                </div>
            </main>
        </div>
    </div>

    <div id="contextMenu" class="context-menu hidden">
        <div class="menu-item" id="ctxCopy">Copy</div>
        <div class="menu-item" id="ctxPaste">Paste</div>
        <div class="menu-divider"></div>
        <div class="menu-item" id="ctxChangeFill">Change Fill Color</div>
        <div class="menu-item" id="ctxChangeStroke">Change Stroke Color</div>
        <div class="menu-divider"></div>
        <div class="menu-item delete" id="ctxDelete">Delete Element</div>
    </div>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="app.js?v=2"></script>
</body>

</html>